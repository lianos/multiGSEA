<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Gene Set Collection Metadata — collectionMetadata • multiGSEA</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  

<meta property="og:title" content="Gene Set Collection Metadata — collectionMetadata" />
<meta property="og:description" content="The design of the GeneSetDb is such that we assume that groups of gene sets
are usually defined together and will therefore share similar metadata.
These groups of gene sets will fall into the same &quot;collection&quot;, and,
therefore, metadata for particular gene sets are tracked at the collection
level.
Types of metadata being referred to could be things like the organism
that a batch of gene sets were defined in, the type of feature identifiers
that a collection of gene sets are using (ie. GSEABase::EntrezIdentifier())
or a URL pattern that combines the collection,name compound key that one
can browse to in order to find out more information about the gene set.
There are explicit helper functions that set and get these aforementioned
metadata, namely org(), featureIdType(),
geneSetCollectionURLfunction(), and geneSetURL(). Aribtrary
metadata can be stored at the collection level using the
addCollectionMetadata() function. More details are provided below." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">multiGSEA</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.99</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/multiGSEA.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Gene Set Collection Metadata</h1>
    
    <div class="hidden name"><code>collectionMetadata.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The design of the GeneSetDb is such that we assume that groups of gene sets
are usually defined together and will therefore share similar metadata.
These groups of gene sets will fall into the same "collection", and,
therefore, metadata for particular gene sets are tracked at the collection
level.</p>
<p>Types of metadata being referred to could be things like the organism
that a batch of gene sets were defined in, the type of feature identifiers
that a collection of gene sets are using (ie. <code><a href='https://rdrr.io/pkg/GSEABase/man/GeneIdentifierType-constructors.html'>GSEABase::EntrezIdentifier()</a></code>)
or a URL pattern that combines the collection,name compound key that one
can browse to in order to find out more information about the gene set.</p>
<p>There are explicit helper functions that set and get these aforementioned
metadata, namely <code>org()</code>, <code>featureIdType()</code>,
<code>geneSetCollectionURLfunction()</code>, and <code>geneSetURL()</code>. Aribtrary
metadata can be stored at the collection level using the
<code>addCollectionMetadata()</code> function. More details are provided below.</p>
    </div>

    <pre class="usage"><span class='fu'>collectionMetadata</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>collection</span>, <span class='va'>name</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='fu'>geneSetURL</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>i</span>, <span class='va'>j</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='fu'>geneSetCollectionURLfunction</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>i</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='fu'>geneSetCollectionURLfunction</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>i</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='va'>value</span>

<span class='fu'>featureIdType</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>i</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='fu'>featureIdType</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>i</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='va'>value</span>

<span class='fu'>org</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>i</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='fu'>org</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>i</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='va'>value</span>

<span class='fu'>addCollectionMetadata</span><span class='op'>(</span>
  <span class='va'>x</span>,
  <span class='va'>xcoll</span>,
  <span class='va'>xname</span>,
  <span class='va'>value</span>,
  validate.value.fn <span class='op'>=</span> <span class='cn'>NULL</span>,
  allow.add <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p><code><a href='GeneSetDb-class.html'>GeneSetDb()</a></code></p></td>
    </tr>
    <tr>
      <th>collection</th>
      <td><p>The geneset collection to to query</p></td>
    </tr>
    <tr>
      <th>name</th>
      <td><p>The name of the metadata variable to get the value for</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>not used yet</p></td>
    </tr>
    <tr>
      <th>i</th>
      <td><p>The collection,name compound key identifier of the gene set</p></td>
    </tr>
    <tr>
      <th>j</th>
      <td><p>The collection,name compound key identifier of the gene set</p></td>
    </tr>
    <tr>
      <th>value</th>
      <td><p>The value of the metadata variable</p></td>
    </tr>
    <tr>
      <th>xcoll</th>
      <td><p>The collection name</p></td>
    </tr>
    <tr>
      <th>xname</th>
      <td><p>The name of the metadata variable</p></td>
    </tr>
    <tr>
      <th>validate.value.fn</th>
      <td><p>If a function is provided, it is run on
<code>value</code> and msut return <code>TRUE</code> for addition to be made</p></td>
    </tr>
    <tr>
      <th>allow.add</th>
      <td><p>If <code>FALSE</code>, this xcoll,xname should be in the
<code>GeneSetDb</code> already, and this will fail because something is
deeply wrong with the world</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A character vector of URLs for each of the genesets identified by
<code>i, j</code>. <code>NA</code> is returned for genesets <code>i,j</code> that are not found in <code>x</code>.</p>
<p>The updated <code>GeneSetDb</code>.</p>
    <h2 class="hasAnchor" id="gene-set-urls"><a class="anchor" href="#gene-set-urls"></a>Gene Set URLs</h2>

    


<p>A URL function can be defined per collection that takes the collection,name
compound key and generates a URL for the gene set that the user can browse
to for futher information. For instance, the
<code>geneSetCollectionURLfunction()</code> for the MSigDB collections are defined
like so:</p><pre><span class='va'>url.fn</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>collection</span>, <span class='va'>name</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='va'>url</span> <span class='op'>&lt;-</span> <span class='st'>'http://www.broadinstitute.org/gsea/msigdb/cards/%s.html'</span>
  <span class='fu'><a href='https://rdrr.io/r/base/sprintf.html'>sprintf</a></span><span class='op'>(</span><span class='va'>url</span>, <span class='va'>name</span><span class='op'>)</span>
<span class='op'>}</span>
<span class='va'>gdb</span> <span class='op'>&lt;-</span> <span class='fu'><a href='getMSigGeneSetDb.html'>getMSigGeneSetDb</a></span><span class='op'>(</span><span class='st'>'H'</span><span class='op'>)</span>
<span class='fu'>geneSetCollectionURLfunction</span><span class='op'>(</span><span class='va'>gdb</span>, <span class='st'>'H'</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='va'>url.fn</span>
</pre>

<p>In this way, a call to <code>geneSetURL(gdb, 'H', 'HALLMARK_ANGIOGENESIS')</code>
will return
http://www.broadinstitute.org/gsea/msigdb/cards/HALLMARK_ANGIOGENESIS.html.</p>
<p>This function is vectorized over <code>i</code> and <code>j</code></p>
    <h2 class="hasAnchor" id="feature-id-types"><a class="anchor" href="#feature-id-types"></a>Feature ID Types</h2>

    


<p>When defining a set of gene sets in a collection, the identifiers used must
be of the same type. Most often you'll probably be working with Entrez
identifiers, simply because that's what most of the annotations work with.</p>
<p>As such, you'd define that your collection uses geneset identifiers like
so:</p><pre><span class='va'>gdb</span> <span class='op'>&lt;-</span> <span class='fu'><a href='getMSigGeneSetDb.html'>getMSigGeneSetDb</a></span><span class='op'>(</span><span class='st'>'H'</span><span class='op'>)</span>
<span class='fu'>featureIdType</span><span class='op'>(</span><span class='va'>gdb</span>, <span class='st'>'H'</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>GSEABase</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/GSEABase/man/GeneIdentifierType-constructors.html'>ENSEMBLIdentifier</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='co'>## or, equivalently (but you don't want to use this)</span>
<span class='va'>gdb</span> <span class='op'>&lt;-</span> <span class='fu'>addCollectionMetadata</span><span class='op'>(</span><span class='va'>gdb</span>, <span class='st'>'H'</span>, <span class='st'>'id_type'</span>, <span class='fu'>GSEABase</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/GSEABase/man/GeneIdentifierType-constructors.html'>ENSEMBLIdentifier</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
</pre>

    <h2 class="hasAnchor" id="organism"><a class="anchor" href="#organism"></a>Organism</h2>

    


<p>You're going to want to keep track of the organism the experiments were run
in that were used to define this collection of gene sets.</p><pre><span class='va'>gdb</span> <span class='op'>&lt;-</span> <span class='fu'><a href='getMSigGeneSetDb.html'>getMSigGeneSetDb</a></span><span class='op'>(</span><span class='st'>'H'</span><span class='op'>)</span>
<span class='fu'>org</span><span class='op'>(</span><span class='va'>gdb</span>, <span class='st'>'H'</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='st'>'Homo_sapiens'</span>
</pre>

    <h2 class="hasAnchor" id="adding-arbitrary-collectionmetadata"><a class="anchor" href="#adding-arbitrary-collectionmetadata"></a>Adding arbitrary collectionMetadata</h2>

    


<p>Adds arbitrary metadata to a gene set collection of a GeneSetDb</p>
<p>Note that this is not a replacement method! You must catch the returned
object to keep the one with the updated <code>collectionMetadata</code>. Although this
function is exported, I imagine this being used mostly through predefined
replace methods that use this as a utility function, such as the replacement
methods for <code>org()</code>, and <code>featureIdType()</code>.</p><pre><span class='va'>gdb</span> <span class='op'>&lt;-</span> <span class='fu'><a href='getMSigGeneSetDb.html'>getMSigGeneSetDb</a></span><span class='op'>(</span><span class='st'>'H'</span><span class='op'>)</span>
<span class='va'>gdb</span> <span class='op'>&lt;-</span> <span class='fu'>addCollectionMetadata</span><span class='op'>(</span><span class='va'>gdb</span>, <span class='st'>'H'</span>, <span class='st'>'foo'</span>, <span class='st'>'bar'</span><span class='op'>)</span>
</pre>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='va'>gdb</span> <span class='op'>&lt;-</span> <span class='fu'><a href='getMSigGeneSetDb.html'>getMSigGeneSetDb</a></span><span class='op'>(</span><span class='st'>'H'</span><span class='op'>)</span>

<span class='co'>## Gene Set URLs</span>
<span class='fu'>geneSetURL</span><span class='op'>(</span><span class='va'>gdb</span>, <span class='st'>'H'</span>, <span class='st'>'HALLMARK_ADIPOGENESIS'</span><span class='op'>)</span>
</div><div class='output co'>#&gt;                                                                            H 
#&gt; "http://www.broadinstitute.org/gsea/msigdb/cards/HALLMARK_ADIPOGENESIS.html" </div><div class='input'><span class='fu'>geneSetURL</span><span class='op'>(</span><span class='va'>gdb</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'H'</span>, <span class='st'>'H'</span><span class='op'>)</span>,
           <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'HALLMARK_ADIPOGENESIS'</span>, <span class='st'>'HALLMARK_ANGIOGENESIS'</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;                                                                            H 
#&gt; "http://www.broadinstitute.org/gsea/msigdb/cards/HALLMARK_ADIPOGENESIS.html" 
#&gt;                                                                            H 
#&gt; "http://www.broadinstitute.org/gsea/msigdb/cards/HALLMARK_ANGIOGENESIS.html" </div><div class='input'>
<span class='co'>## feature_id TYpe</span>
<span class='fu'>featureIdType</span><span class='op'>(</span><span class='va'>gdb</span>, <span class='st'>'H'</span><span class='op'>)</span>
</div><div class='output co'>#&gt; geneIdType: ENSEMBL</div><div class='input'>
<span class='co'>## Organism</span>
<span class='fu'>org</span><span class='op'>(</span><span class='va'>gdb</span>, <span class='st'>'H'</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] "Homo_sapiens"</div><div class='input'>
<span class='co'>## Arbitrary metadata</span>
<span class='va'>gdb</span> <span class='op'>&lt;-</span> <span class='fu'>addCollectionMetadata</span><span class='op'>(</span><span class='va'>gdb</span>, <span class='st'>'H'</span>, <span class='st'>'foo'</span>, <span class='st'>'bar'</span><span class='op'>)</span>
<span class='va'>cmh</span> <span class='op'>&lt;-</span> <span class='fu'>collectionMetadata</span><span class='op'>(</span><span class='va'>gdb</span>, <span class='st'>'H'</span><span class='op'>)</span> <span class='co'>## print this to see</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: The collectionMetadata has a list column ('value'). This may not play well with data.frame based operation. Consider returning as a data.table by setting `as.dt = TRUE`</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Steve Lianoglou, Denali Therapeutics, Genentech.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


